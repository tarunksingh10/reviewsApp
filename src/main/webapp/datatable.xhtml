<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">


	<style type="text/css">
.ui-datatable .ui-column-filter {
	display: block;
	width: 00px !important;
	margin: auto;
};


</style>

<style type="text/css">
.ui-datatable .ui-datatable-header { background: green !important;} 
</style>



	<ui:define name="content">
		<div class="ContainerIndent">
		<p:panel header="Search panel" style="display:block; text-align:center">
		<div class="ContainerIndent">
			<h:form>
			<h:panelGroup style="display:block; text-align:center">
				<h:outputText value="Hotel" ></h:outputText>
					<p:inputText value="#{testingDisplayView.hotel}"></p:inputText>
					
				<h:outputText value="City" ></h:outputText>
					<h:inputText value="#{testingDisplayView.city}"></h:inputText>
				<h:outputText value="Source" ></h:outputText>
					<h:inputText value="#{testingDisplayView.source}"></h:inputText>
				<h:outputText value="Review from date" ></h:outputText>
					<p:calendar id="button1" value="#{testingDisplayView.reviewFromDate}" pattern="yyyy-MM-dd" pages="2" showOn="button"></p:calendar>
				
				<h:outputText value="Review to date" ></h:outputText>
					<p:calendar id="button2" value="#{testingDisplayView.reviewToDate}" pattern="yyyy-MM-dd" pages="2" showOn="button"></p:calendar>		
					
				<h:commandButton value="Submit" action="#{testingDisplayView.searchReviews()}"></h:commandButton>
			</h:panelGroup>		
			</h:form>
		</div>	
		</p:panel>
			<p:panel>
				<div class="ContainerIndent">
					<h:form id="form">
						<p:dataTable id="singleDT" var="outputTableEntry"
							value="#{testingDisplayView.outputTableList}" selectionMode="single"
							selection="#{testingDisplayView.selectedOutputTableEntry}"
							rowKey="#{outputTableEntry.id}" rows="25" paginator="true"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							paginatorPosition="bottom" rowsPerPageTemplate="25,50,75,100"
							emptyMessage="No details found with given criteria" reflow="true"
							widgetVar="reviewTable" resizableColumns="false"
							stickyHeader="false" editable="true" rowIndexVar="rowIdx"
							scrollable="true">




							<f:facet name="header"> <h1 class="TexAlCenter gray Fs10">
                            <span class="white Fs27">Treebo Reviews</span>
                        </h1>
									<div align="right">
									<h:outputText value="Download data" />


									<h:commandLink>
										<i class=" icon-file-excel"></i>
										<p:dataExporter type="xls" target="singleDT"
											fileName="Reviews" pageOnly="true" />
									</h:commandLink>
								</div>

							</f:facet>
							

							<p:column style="width:20px" exportable="false">
								<p:rowToggler />
							</p:column>

							<p:column headerText="Date" style="width:65px"
								sortBy="#{outputTableEntry.review_Date}">
								<h:outputText value="#{outputTableEntry.review_Date}">
									<f:convertDateTime pattern="MM/dd/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="Source" style="width:75px"
								sortBy="#{outputTableEntry.source}">
								<h:outputText value="#{outputTableEntry.source}" />
							</p:column>

							<p:column headerText="Rev. Text" style="width:120px">

								<h:outputText value="#{outputTableEntry.reviewShort}" id="text1" />
								<!-- <pe:tooltip for="text1" value="#{outputTableEntry.review}"
									header="Review Text"
								    style="font-size: 25px;"/> -->
								    
								    <p:tooltip id="toolTipTrack2" for="text1" value="#{outputTableEntry.review}" style="max-width: 500px;  font-size: 15px;" />
							</p:column>

							<p:column headerText="L0" sortBy="#{outputTableEntry.rating}" style="width:65px"
								filterBy="#{outputTableEntry.rating}" filterStyle="width:55px">
								<h:outputText value="#{outputTableEntry.rating}" />
							</p:column>

							<p:column headerText="City" sortBy="#{outputTableEntry.city}" style="width:50px"
								resizable="true" filterStyle="width:50px"
								filterBy="#{outputTableEntry.city}">
								<h:outputText value="#{outputTableEntry.city}" />
							</p:column>


							<p:column headerText="Property" resizable="true" style="width:85px"
								sortBy="#{outputTableEntry.hotel}"
								filterBy="#{outputTableEntry.hotel}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.hotel}" />

							</p:column>
							
							<p:column headerText="P1" sortBy="#{outputTableEntry.p1}" style="width:85px"
								filterBy="#{outputTableEntry.p1}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.p1}" />
							</p:column>


							<p:column headerText="P2" sortBy="#{outputTableEntry.p2}" style="width:85px"
								filterBy="#{outputTableEntry.p2}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.p2}" />
							</p:column>


							<p:column headerText="P3" sortBy="#{outputTableEntry.p3}" style="width:85px"
								filterBy="#{outputTableEntry.p3}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.p3}" />
							</p:column>


							<p:column headerText="P4" sortBy="#{outputTableEntry.p4}" style="width:85px"
								filterBy="#{outputTableEntry.p4}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.p4}" />
							</p:column>


							<p:column headerText="P5" sortBy="#{outputTableEntry.p5}" style="width:85px"
								filterBy="#{outputTableEntry.p5}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.p5}" />
							</p:column>


							<p:column headerText="N1" sortBy="#{outputTableEntry.n1}" style="width:85px"
								filterBy="#{outputTableEntry.n1}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.n1}" />
							</p:column>


							<p:column headerText="N2" sortBy="#{outputTableEntry.n2}" style="width:85px"
								filterBy="#{outputTableEntry.n2}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.n2}" />
							</p:column>


							<p:column headerText="N3" sortBy="#{outputTableEntry.n3}" style="width:85px"
								filterBy="#{outputTableEntry.n3}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.n3}" />
							</p:column>


							<p:column headerText="N4" sortBy="#{outputTableEntry.n4}" style="width:85px"
								filterBy="#{outputTableEntry.n4}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.n4}" />
							</p:column>


							<p:column headerText="N5" sortBy="#{outputTableEntry.n5}" style="width:85px"
								filterBy="#{outputTableEntry.n5}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.n5}" />
							</p:column>
							

							<!-- <p:column headerText="Accu.?" title="Is category correct?"
								style="width:30px">
								<h:selectBooleanCheckbox
									value="#{outputTableEntry.correctCategory}"
									disabled="#{not outputTableEntry.editable}" />
							</p:column>
 -->
							<p:column headerText="Feedback" style="width:128px">
								<h:outputText value="#{outputTableEntry.feedback}"
									rendered="#{not outputTableEntry.editable}" />
								<h:inputTextarea value="#{outputTableEntry.feedback}"
									rendered="#{outputTableEntry.editable}" />
							</p:column>

							<p:column headerText="Action" style="width:90px"
								exportable="false">
								<p:commandButton value="Feedback"
									action="#{testingDisplayView.editAction(outputTableEntry)}"
									rendered="#{not outputTableEntry.editable}"
									update=":form:singleDT"></p:commandButton>
								<p:commandButton value="Save"
									action="#{testingDisplayView.saveAction(outputTableEntry)}"
									rendered="#{outputTableEntry.editable}" update=":form:singleDT"></p:commandButton>
							</p:column>

							<f:facet name="footer">
								<p:commandButton process="singleDT"
									update=":form:selectedOutputTableEntry" value="View"
									
									oncomplete="PF('reviewDialog').show()" />
							</f:facet>


							<p:rowExpansion>

								<p:panelGrid columns="2" columnClasses="label,value"
									style="width:30%">
									<f:facet name="header">

									</f:facet>

									<h:outputText value="Review Id" style="width:10%" />
									<h:outputText value="#{outputTableEntry.unique_id}" />

									<h:outputText value="Sentence Id" style="width:10%" />
									<h:outputText value="#{outputTableEntry.sentence_id}" />
									
									<h:outputText value="L1" style="width:10%" />
									
									
								<h:outputText value="#{outputTableEntry.l1}" />
						

							<h:outputText value="L2" style="width:10%" />
							<p:column headerText="L2" sortBy="#{outputTableEntry.l2}"
								filterBy="#{outputTableEntry.l2}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.l2}" />
							</p:column>

								</p:panelGrid>
							</p:rowExpansion>
						</p:dataTable>

						<p:dialog header="Review information" widgetVar="reviewDialog"
							modal="true" showEffect="fade" hideEffect="fade"
							resizable="false" responsive="true" width="600px">
							<p:outputPanel id="selectedOutputTableEntry"
								style="text-align:center;">
								<p:panelGrid columns="2"
									rendered="#{not empty testingDisplayView.selectedOutputTableEntry}">
									<h:outputText value="Sentiment:" />
									<h:outputText
										value="#{testingDisplayView.selectedOutputTableEntry.sentiment_text}" />

									<h:outputText value="Category" />
									<h:outputText
										value="#{testingDisplayView.selectedOutputTableEntry.category}" />

									<h:outputText value="City:" />
									<h:outputText
										value="#{testingDisplayView.selectedOutputTableEntry.city}" />

									<h:outputText value="hotel" />
									<h:outputText
										value="#{testingDisplayView.selectedOutputTableEntry.hotel}" />

									<h:outputText value="Review-Text" />
									<h:outputText
										value="#{testingDisplayView.selectedOutputTableEntry.review}" />
								</p:panelGrid>
							</p:outputPanel>
						</p:dialog>

						<div class="EmptyBox20"></div>
					</h:form>
				</div>
			</p:panel>

			<div class="EmptyBox20"></div>

		</div>
	</ui:define>

</ui:composition>