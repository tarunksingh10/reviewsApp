<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml"
	 xmlns:pe="http://primefaces.org/ui/extensions">


	<style type="text/css">
.ui-datatable .ui-column-filter {
	display: block;
	width: 00px !important;
	margin: auto;
}
</style>



	<ui:define name="content">
		<div class="ContainerIndent">
			<p:panel>
				<div class="ContainerIndent">
					<h:form id="form">
						<p:dataTable id="singleDT" var="outputTableEntry"
							value="#{outputTableView.outputTableList}" selectionMode="single"
							selection="#{outputTableView.selectedOutputTableEntry}"
							rowKey="#{outputTableEntry.id}" rows="25" paginator="true"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="25,50,75,100"
							emptyMessage="No details found with given criteria" reflow="true"
							widgetVar="reviewTable" resizableColumns="false"
							rowStyleClass="#{outputTableEntry.sentiment_x eq 'Negative' ? 'errorStyle' : null}"
							stickyHeader="false" editable="true" rowIndexVar="rowIdx"
							scrollable="true">

							<p:outputPanel>
								<h:outputText value="Search all fields:" />
								<p:inputText id="globalFilter"
									onkeyup="PF('reviewTable').filter()" style="width:150px"
									placeholder="Enter keyword" />
							</p:outputPanel>
							<style type="text/css">
.errorStyle {
	background-color: #efb0b0 !important;
}
</style>

							<f:facet name="header">Teebo reviews
									<div align="right">
									<h:outputText value="Download data" />
									<h:commandLink>
										<i class=" icon-file-excel"></i>
										<p:dataExporter type="xls" target="singleDT"
											fileName="Reviews" pageOnly="true" />
									</h:commandLink>

									<!-- <h:commandLink>
										<i class="icon-file-pdf"></i>
										<p:dataExporter type="pdf" target="singleDT"
											fileName="singleDT" pageOnly="true" />
									</h:commandLink> -->
								</div>

							</f:facet>
							 <!-- <p:column headerText="R. Id" style="width:30px"
								>
								<h:outputText value="#{outputTableEntry.unique_id}" />
							</p:column>


							<p:column headerText="S. Id" style="width:30px"
								
								>
								<h:outputText value="#{outputTableEntry.sentence_id}"/>
							</p:column>  -->

							
							<p:column headerText="Sentiment"
								sortBy="#{outputTableEntry.sentiment_x}" style="width:85px" >
								<h:outputText value="#{outputTableEntry.sentiment_x}" />

							</p:column>

							<p:column headerText="Sentence Text"
								sortBy="#{outputTableEntry.sentence}" style="width:120px" >
								<h:outputText value="#{outputTableEntry.setenceShort}" id="sentence"/>
								
							
       
                         <pe:tooltip for="sentence" value="#{outputTableEntry.sentence}" header="Sentence Text" styleClass="qtip qtip-yellow qtip-rounded qtip-shadow"/> 

							</p:column>
							<p:column headerText="Rev. Date"
								sortBy="#{outputTableEntry.date}" style="width:100px">
								<h:outputText value="#{outputTableEntry.date}">
									<f:convertDateTime pattern="MM/dd/yyyy hh:mm a" />
								</h:outputText>
							</p:column>

							<p:column headerText="Rev. Src"
								sortBy="#{outputTableEntry.source}" style="width:100px">
								<h:outputText value="#{outputTableEntry.source}" />
							</p:column>

							<p:column headerText="Review Text"
								sortBy="#{outputTableEntry.verbatim}" style="width:150px">
								
								<h:outputText value="#{outputTableEntry.reviewShort}" id="text1" />
								 <pe:tooltip for="text1" value="#{outputTableEntry.verbatim}" header="Review Text" styleClass="qtip qtip-yellow qtip-rounded qtip-shadow"/> 
							</p:column>

							<p:column headerText="L0" sortBy="#{outputTableEntry.l0}" filterBy="#{outputTableEntry.l0}" filterStyle="width:55px" 
								>
								<h:outputText value="#{outputTableEntry.l0}" />
							</p:column>

							<p:column headerText="L1" sortBy="#{outputTableEntry.l1}" style="width:80px" filterBy="#{outputTableEntry.l1}"  filterStyle="width:50px"
								>
								<h:outputText value="#{outputTableEntry.l1}" />
							</p:column>

							<p:column headerText="L2" sortBy="#{outputTableEntry.l2}" style="width:80px" filterBy="#{outputTableEntry.l2}"  filterStyle="width:50px"
								>
								<h:outputText value="#{outputTableEntry.l2}" />
							</p:column>

<p:column headerText="L3" sortBy="#{outputTableEntry.l3}" filterBy="#{outputTableEntry.l3}"  style="width:100px" filterStyle="width:50px"
								>
								<h:outputText value="#{outputTableEntry.l3}" />
							</p:column>

							
							<p:column headerText="City" sortBy="#{outputTableEntry.city}" resizable="true" style="width:80px" filterStyle="width:50px"
								 filterBy="#{outputTableEntry.city}">
								<h:outputText value="#{outputTableEntry.city}" />
							</p:column>


							<p:column headerText="Pro. Name" resizable="true"
								sortBy="#{outputTableEntry.property}" 
								filterBy="#{outputTableEntry.property}" filterStyle="width:50px">
								<h:outputText value="#{outputTableEntry.property}"  />

							</p:column>

							<p:column headerText="Accu.?" title="Is category correct?" style="width:30px"
								 
								>
								<h:selectBooleanCheckbox
									value="#{outputTableEntry.correctCategory}" disabled="#{not outputTableEntry.editable}"/>
							</p:column>

							<p:column headerText="Feedback" >
								<h:outputText value="#{outputTableEntry.feedback}" 
									rendered="#{not outputTableEntry.editable}" />
								<h:inputTextarea value="#{outputTableEntry.feedback}"
									rendered="#{outputTableEntry.editable}" />
							</p:column>

							<p:column headerText="Action" style="width:70px" exportable="false">
								<p:commandButton value="Edit" id="edit"
									action="#{outputTableView.editAction(outputTableEntry)}"
									rendered="#{not outputTableEntry.editable}"
									update=":form:singleDT"></p:commandButton>
								<p:commandButton value="Save" id="save"
									action="#{outputTableView.saveAction(outputTableEntry)}"
									rendered="#{outputTableEntry.editable}" update=":form:singleDT"></p:commandButton>
							</p:column>

							<f:facet name="footer">
								<p:commandButton process="singleDT"
									update=":form:selectedOutputTableEntry" value="View"
									oncomplete="PF('reviewDialog').show()" />
							</f:facet>
						</p:dataTable>

						<p:dialog header="Review information" widgetVar="reviewDialog"
							modal="true" showEffect="fade" hideEffect="fade"
							resizable="false" responsive="true" width="600px">
							<p:outputPanel id="selectedOutputTableEntry"
								style="text-align:center;">
								<p:panelGrid columns="2"
									rendered="#{not empty outputTableView.selectedOutputTableEntry}">
									<h:outputText value="Sentiment:" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.sentiment_x}" />

									<h:outputText value="Category" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.category}" />

									<h:outputText value="City:" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.city}" />

									<h:outputText value="Property" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.property}" />

									<h:outputText value="Review-Text" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.verbatim}" />
								</p:panelGrid>
							</p:outputPanel>
						</p:dialog>

						<div class="EmptyBox20"></div>
					</h:form>
				</div>
			</p:panel>

			<div class="EmptyBox20"></div>

		</div>
	</ui:define>

</ui:composition>