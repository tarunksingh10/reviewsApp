<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">



	<ui:define name="content">
		<div class="ContainerIndent">
			<p:panel>
				<div class="ContainerIndent">
					<h:form id="form">
						<p:dataTable id="singleDT" var="outputTableEntry"
							value="#{outputTableView.outputTableList}" selectionMode="single"
							selection="#{outputTableView.selectedOutputTableEntry}"
							rowKey="#{outputTableEntry.unique_id}" rows="50" paginator="true"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="50,100"
							emptyMessage="No details found with given criteria" reflow="true"
							widgetVar="reviewTable" resizableColumns="false"
							rowStyleClass="#{outputTableEntry.sentiment_x eq 'Negative' ? 'errorStyle' : null}"
							stickyHeader="false">
							
							<f:facet name="{Exporters}">
            <h:commandLink>
                <p:graphicImage name="/demo/images/excel.png" width="24"/>
                <p:dataExporter type="xls" target="tbl" fileName="cars" />
            </h:commandLink>
 
            <h:commandLink>
                <p:graphicImage name="/demo/images/pdf.png" width="24"/>
                <p:dataExporter type="pdf" target="tbl" fileName="cars"/>
            </h:commandLink>
 
            <h:commandLink>
                <p:graphicImage name="/demo/images/csv.png" width="24"/>
                <p:dataExporter type="csv" target="tbl" fileName="cars" />
            </h:commandLink>
 
            <h:commandLink>
                <p:graphicImage name="/demo/images/xml.png" width="24"/>
                <p:dataExporter type="xml" target="tbl" fileName="cars" />
            </h:commandLink>
        </f:facet>
							

	<style type="text/css">
.errorStyle {
	background-color: #efb0b0 !important;
}
</style>

							<f:facet name="{Exporters}">
								<h:commandLink>
									<i class="icon-file-exce"></i>
									<p:dataExporter type="xls" target="tbl" fileName="Export_data" />
								</h:commandLink>

								<h:commandLink>
									<i class="icon-file-pdf"></i>
									<p:dataExporter type="pdf" target="tbl" fileName="Export_data" />
								</h:commandLink>

							</f:facet>



							<!-- <p:column headerText="Id" sortBy="#{outputTableEntry.Unique_id}"
								footerText="Id">
								<h:outputText value="#{outputTableEntry.unique_id}" />
							</p:column> -->

							<p:column headerText="Sentiment-x"
								sortBy="#{outputTableEntry.sentiment_x}"
								footerText="Sentiment_x">
								<h:outputText value="#{outputTableEntry.sentiment_x}" />
							</p:column>

							<p:column headerText="Sentiment_y"
								sortBy="#{outputTableEntry.sentiment_y}"
								footerText="sentiment_y">
								<h:outputText value="#{outputTableEntry.sentiment_y}" />
							</p:column>

							<p:column headerText="Review-Text" colspan="4"
								sortBy="#{outputTableEntry.verbatim}" footerText="Sentence">
								<h:outputText value="#{outputTableEntry.verbatim}" />
							</p:column>

							<p:column headerText="Source" sortBy="#{outputTableEntry.source}"
								footerText="Source">
								<h:outputText value="#{outputTableEntry.source}" />
							</p:column>
							<!-- <p:column headerText="sentence_id"
								sortBy="#{outputTableEntry.sentence_id}"
								footerText="sentence_id">
								<h:outputText value="#{outputTableEntry.sentence_id}" />
							</p:column> -->

							<p:column headerText="Date" sortBy="#{outputTableEntry.date}"
								footerText="Date">
								<h:outputText value="#{outputTableEntry.date}">
									<f:convertDateTime pattern="MM/dd/yyyy hh:mm a" />
								</h:outputText>
							</p:column>

							<p:column headerText="Category"
								sortBy="#{outputTableEntry.category}" footerText="Category"
								filterBy="#{outputTableEntry.category}">
								<h:outputText value="#{outputTableEntry.category}" />
							</p:column>
							<p:column headerText="City" sortBy="#{outputTableEntry.city}"
								footerText="City" filterBy="#{outputTableEntry.city}">
								<h:outputText value="#{outputTableEntry.city}" />
							</p:column>
							<p:column headerText="Property"
								sortBy="#{outputTableEntry.property}" footerText="Property"
								filterBy="#{outputTableEntry.property}">
								<h:outputText value="#{outputTableEntry.property}" />
							</p:column>
							<f:facet name="footer">
							
      							<p:commandButton process="singleDT"
									update=":form:selectedOutputTableEntry" value="Review details"
									oncomplete="PF('carDialog').show()" />
							</f:facet>
						</p:dataTable>

						<p:dialog header="Review information" widgetVar="carDialog"
							modal="true" showEffect="fade" hideEffect="fade"
							resizable="false" responsive="true">
							<p:outputPanel id="selectedOutputTableEntry"
								style="text-align:center;">
								<p:panelGrid columns="2"
									rendered="#{not empty outputTableView.selectedOutputTableEntry}">
									<h:outputText value="Sentiment:" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.sentiment_x}" />

									<h:outputText value="Category" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.category}" />

									<h:outputText value="City:" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.city}" />

									<h:outputText value="Property" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.property}" />

									<h:outputText value="Review-Text" />
									<h:outputText
										value="#{outputTableView.selectedOutputTableEntry.verbatim}" />
								</p:panelGrid>
							</p:outputPanel>
						</p:dialog>

						<div class="EmptyBox20"></div>

					</h:form>
				</div>
			</p:panel>

			<div class="EmptyBox20"></div>

		</div>
	</ui:define>

</ui:composition>